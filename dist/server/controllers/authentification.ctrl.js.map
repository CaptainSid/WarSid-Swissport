{"version":3,"sources":["server/controllers/authentification.ctrl.js"],"names":["mongoose","require","jwt","bcrypt","compte","compteAg","module","exports","register","req","res","validate","body","err","value","rounds","key","genSaltSync","mdp_hash","hashSync","motDePasse","nouveauCompte","nom","prenom","email","cle","sexe","fonction","role","dateDeNaissance","telephone","save","user","status","send","message","json","registerAg","nouveauCompteAg","matricule","console","log","login","findOne","then","result","token","sign","id","_id","jwtSecret","expiresIn","logedIn","secret","requestProperty"],"mappings":"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","file":"authentification.ctrl.js","sourceRoot":"../../../../.."}